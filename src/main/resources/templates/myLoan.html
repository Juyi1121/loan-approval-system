<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: layout(~{::title}, ~{::section})">

<title>我的申請紀錄</title>

<section>
  <h1 class="mb-4">
    <i class="bi bi-clock-history me-2"></i>我的申請紀錄
  </h1>

  <!-- 沒有申請 -->
  <div th:if="${#lists.isEmpty(loans)}" class="text-muted">
      您尚未提出任何貸款申請。
  </div>

  <!-- 有申請 -->
  <table class="table table-bordered align-middle"
         th:if="${!#lists.isEmpty(loans)}">
    <thead class="table-light">
      <tr>
        <th>ID</th><th>公司</th><th>金額 (NT$)</th><th>期限 (月)</th><th>狀態</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="l : ${loans}">
        <td th:text="${l.id}">1</td>
        <td th:text="${l.company.companyName}">ABC</td>
        <td th:text="${#numbers.formatInteger(l.loanAmount, 0, 'COMMA')}">100 000</td>
        <td th:text="${l.term}">12</td>
        <td>
          <span th:text="${l.status}"
                th:classappend="${l.status.name() == 'APPROVED' ? 'badge bg-success' :
                                (l.status.name() == 'REJECTED' ? 'badge bg-danger' : 'badge bg-secondary')}">
            PENDING
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- 成功提示 -->
  <div th:if="${param.success}" class="alert alert-success mt-3">
      申請已送出！
  </div>
</section>
</html>
